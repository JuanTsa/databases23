CREATE TABLE `User` (
  `User_ID` int(50) NOT NULL AUTO_INCREMENT,
  `Username` varchar(50) NOT NULL,
  `Password` varchar(50) NOT NULL,
  `Name` varchar(50) NOT NULL,
  `Surname` varchar(50) NOT NULL,
  `Email` varchar(50) NOT NULL,
  `Age` int(3) NOT NULL,
  `Copies_Borrowed` int(50) NOT NULL,
  `Copies_Reserved` int(50) NOT NULL,
  `Max_Copies_Borrowed` int(50) NOT NULL,
  `Max_Copies_Reserved` int(50) NOT NULL,
  `User_Type` enum('Administrator', 'Operator', 'Teacher', 'Student') NOT NULL,
  PRIMARY KEY (`User_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

CREATE TABLE `School_Unit` (
  `School_ID` int(50) NOT NULL AUTO_INCREMENT,
  `School_Name` varchar(50) NOT NULL,
  `Address` varchar(50) NOT NULL,
  `Phone` int(11) NOT NULL,
  `Email` varchar(50) NOT NULL,
  `Principal_Name` varchar(50) NOT NULL,
  `Principal_Surname` varchar(50) NOT NULL,
  `Operator_Name` varchar(50) NOT NULL,
  `Operator_Surname` varchar(50) NOT NULL,
  PRIMARY KEY (`School_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

CREATE TABLE IF NOT EXISTS `Category` (
  `Category_ID` INT NOT NULL AUTO_INCREMENT,
  `Category_Name` VARCHAR(50) NOT NULL,
   PRIMARY KEY (`Category_ID`)
)  ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

 CREATE TABLE IF NOT EXISTS `Keyword` (
  `Keyword_ID` INT(50) NOT NULL AUTO_INCREMENT,
  `Keyword_Name` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`Keyword_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

CREATE TABLE `Author` (
  `Author_ID` INT(50) NOT NULL AUTO_INCREMENT,
  `Author_Name` VARCHAR(50) NOT NULL,
  `Books_Written` INT(50) NOT NULL,
  PRIMARY KEY (`Author_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

CREATE TABLE `Book` (
  `Book_ID` INT(50) NOT NULL AUTO_INCREMENT,
  `ISBN` INT(50) NOT NULL,
  `School_ID` INT(50) NOT NULL,
  `Title` VARCHAR(50) NOT NULL,
  `Publisher` VARCHAR(50) NOT NULL,
  `Pages` INT(50) NOT NULL,
  `Summary` TEXT NOT NULL,
  `Available_Copies` INT(50) NOT NULL,
  `Cover` VARCHAR(1000) NOT NULL,
  `Language` VARCHAR(50) NOT NULL,
  `Inventory` INT(50) NOT NULL,
  `Total_Borrowings` INT(50) NOT NULL,
  `Category_ID` INT(50) NOT NULL,
  `Author_ID` INT(50) NOT NULL,
  `Keyword_ID` INT(50) NOT NULL,
  PRIMARY KEY (`Book_ID`),
  CONSTRAINT `fk_book_school_id` FOREIGN KEY (`School_ID`) REFERENCES `School_Unit` (`School_ID`) ON DELETE RESTRICT ON UPDATE CASCADE,
  CONSTRAINT `fk_book_author_id` FOREIGN KEY (`Author_ID`) REFERENCES `Author` (`Author_ID`) ON DELETE RESTRICT ON UPDATE CASCADE,
  CONSTRAINT `fk_book_keyword_id` FOREIGN KEY (`Keyword_ID`) REFERENCES `Keyword` (`Keyword_ID`) ON DELETE RESTRICT ON UPDATE CASCADE,
  CONSTRAINT `fk_book_category_id` FOREIGN KEY (`Category_ID`) REFERENCES `Category` (`Category_ID`) ON DELETE RESTRICT ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

CREATE TABLE `Reservation` (
  `Reservation_ID` int(50) NOT NULL AUTO_INCREMENT,
  `Book_ID` int(50) NOT NULL,
  `User_ID` int(50) NOT NULL,
  `Request_Date` varchar(50) NOT NULL,
  `Status` varchar(50) NOT NULL,
  PRIMARY KEY (`Reservation_ID`),
  CONSTRAINT `fk_book_school_id` FOREIGN KEY (`Book_ID`) REFERENCES `Book` (`Book_ID`) ON DELETE RESTRICT ON UPDATE CASCADE,
  FOREIGN KEY (`User_ID`) REFERENCES `User` (`User_ID`) ON DELETE RESTRICT ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

CREATE TABLE `Review` (
  `Review_ID` int(50) NOT NULL AUTO_INCREMENT,
  `Review_Text` text NOT NULL,
  `Book_ISBN` varchar(13) NOT NULL,
  `User_ID` int(50) NOT NULL,
  `Rating` int(1) NOT NULL,
  `Status` varchar(50) NOT NULL,
  PRIMARY KEY (`Review_ID`),
  FOREIGN KEY (`Book_ISBN`) REFERENCES `Book` (`ISBN`) ON DELETE RESTRICT ON UPDATE CASCADE,
  FOREIGN KEY (`User_ID`) REFERENCES `User` (`User_ID`) ON DELETE RESTRICT ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

CREATE TABLE `Borrowing` (
  `Borrowing_ID` int(50) NOT NULL AUTO_INCREMENT,
  `Book_ID` int(50) NOT NULL,
  `User_ID` int(50) NOT NULL,
  `Borrow_Date` varchar(50) NOT NULL,
  `Due_Date` varchar(50) NOT NULL,
  `Returning_Date` varchar(50),
  `Status` varchar(50) NOT NULL,
  PRIMARY KEY (`Borrowing_ID`),
  FOREIGN KEY (`Book_ID`) REFERENCES `Book` (`Book_ID`) ON DELETE RESTRICT ON UPDATE CASCADE,
  FOREIGN KEY (`User_ID`) REFERENCES `User` (`User_ID`) ON DELETE RESTRICT ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
